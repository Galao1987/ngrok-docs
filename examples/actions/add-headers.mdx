import ConfigExample from "../../src/components/ConfigExample.tsx";
import CelTemplateSyntaxExplanation from "/src/components/CelTemplateSyntaxExplanation";

export const type = "add-headers";

export const ExampleHTTP = () => (
	<ConfigExample
		config={{
			actions: [
				{
					type,
					config: {
						headers: {
							"is-ngrok": "1",
							country: "${conn.geo.country_code}",
						},
					},
				},
			],
		}}
	/>
);

export const TemplatingExamples = () => (
	<>
		<ConfigExample
			snippetText={"simple variable replacement"}
			config={{
				actions: [
					{
						type,
						config: {
							headers: {
								time: "${time.now}",
							},
						},
					},
				],
			}}
		/>
		<ConfigExample
			snippetText={"using a macro"}
			config={{
				actions: [
					{
						type,
						config: {
							headers: {
								"x-secure-session": "getReqCookie('session').Secure",
							},
						},
					},
				],
			}}
		/>
		<ConfigExample
			snippetText={"complex expression"}
			config={{
				actions: [
					{
						type,
						config: {
							headers: {
								complex:
									"${size(getResHeader('Content-Type').filter(v, v.matches('application/json'))) > 0}",
							},
						},
					},
				],
			}}
		/>
	</>
);

;
